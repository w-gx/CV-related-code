## 各参数影响

1. 暗通道最小值滤波半径r。

    这个半径对于去雾效果是有影响的。一定情况下，半径越大去雾的效果越不明显，建议的范围一般是5-25之间，一般选择5,7,9等就会取得不错的效果。

2. w的影响自然也是很大的。

    这个值是我们设置的保留雾的程度。这个基本不用修改。

3. 导向滤波中均值滤波半径。

    这个半径建议取值不小于求暗通道时最小值滤波半径的4倍。因为前面最小值后暗通道时一块一块的，为了使得透射率图更加精细，这个r不能过小（很容易理解，如果这个r和和最小值滤波的一样的话，那么在进行滤波的时候包含的块信息就很少，还是容易出现一块一块的形状）。

4. eps，这个值只是保证除号下面不是0，一般取较小，0.001是一个常用的值。

## notes

1. 这个去雾算法只针对彩色图像，而且对于低对比度的天空或者水面背景的去雾效果会产生块效应，去雾效果不好，而且这种效应并不能通过调参来避免。
2. 暗通道去雾使得图像整体的亮度有所降低，所以在最后可以自适应的提高亮度来减轻这种现象。
3. 导向滤波在matlab中有现成函数，在opencv contrib里也有函数可以调用，另外为了加速运算可以下采样之后进行滤波然后再上采样恢复。